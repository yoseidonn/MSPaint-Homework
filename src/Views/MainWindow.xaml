<Window x:Class="MSPaint.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:canvas="clr-namespace:MSPaint.Canvas"
        xmlns:vm="clr-namespace:MSPaint.ViewModels"
        Title="MSPaint" Height="600" Width="1000"
        Focusable="True"
        WindowStyle="SingleBorderWindow">
    <Window.DataContext>
        <vm:MainViewModel/>
    </Window.DataContext>
    <DockPanel LastChildFill="True">
        <!-- Top menu -->
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="_File">
                <MenuItem Header="_New" Command="{Binding FileNewCommand}" InputGestureText="Ctrl+N"/>
                <MenuItem Header="_Open" Command="{Binding FileOpenCommand}" InputGestureText="Ctrl+O"/>
                <Separator/>
                <MenuItem Header="_Save" Command="{Binding FileSaveCommand}" InputGestureText="Ctrl+S"/>
                <MenuItem Header="Save _As" Command="{Binding FileSaveAsCommand}" InputGestureText="Ctrl+Shift+S"/>
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Header="_Undo" Command="{Binding Canvas.UndoCommand}" InputGestureText="Ctrl+Z"/>
                <MenuItem Header="_Redo" Command="{Binding Canvas.RedoCommand}" InputGestureText="Ctrl+Y"/>
            </MenuItem>
        </Menu>

        <!-- Bottom color bar -->
        <Border DockPanel.Dock="Bottom" Background="#FFF3E9D2" Padding="4">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" Height="56">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                    <!-- Primary/secondary color previews -->
                    <StackPanel Orientation="Vertical" Margin="4" Width="40" HorizontalAlignment="Left">
                        <Border x:Name="PrimaryColorPreview" Background="{Binding PrimaryColor}" Height="20" BorderBrush="Gray" BorderThickness="1" 
                                MouseLeftButtonDown="PrimaryColorPreview_MouseLeftButtonDown" Cursor="Hand"/>
                        <Border x:Name="SecondaryColorPreview" Background="{Binding SecondaryColor}" Height="20" BorderBrush="Gray" BorderThickness="1" Margin="0,2,0,0"
                                MouseLeftButtonDown="SecondaryColorPreview_MouseLeftButtonDown" Cursor="Hand"/>
                    </StackPanel>

                    <!-- Color swatches -->
                    <ItemsControl>
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <Button Width="18" Height="18" Margin="3" Background="Black" Click="ColorSwatch_Click" Tag="Black"/>
                        <Button Width="18" Height="18" Margin="3" Background="Gray" Click="ColorSwatch_Click" Tag="Gray"/>
                        <Button Width="18" Height="18" Margin="3" Background="White" Click="ColorSwatch_Click" Tag="White"/>
                        <Button Width="18" Height="18" Margin="3" Background="Red" Click="ColorSwatch_Click" Tag="Red"/>
                        <Button Width="18" Height="18" Margin="3" Background="Lime" Click="ColorSwatch_Click" Tag="Lime"/>
                        <Button Width="18" Height="18" Margin="3" Background="Cyan" Click="ColorSwatch_Click" Tag="Cyan"/>
                        <Button Width="18" Height="18" Margin="3" Background="Blue" Click="ColorSwatch_Click" Tag="Blue"/>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Main area: left toolbar + canvas -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="72"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Left vertical toolbar -->
            <Border Grid.Column="0" Background="#FFF0EFEF" BorderBrush="#FFDADADA" BorderThickness="1" Padding="6">
                <StackPanel>
                    <!-- Tool buttons -->
                    <Button Content="Pencil" Width="60" Height="30" Margin="0,2" Click="ToolButton_Click" Tag="Pencil" FontSize="10"/>
                    <Button Content="Eraser" Width="60" Height="30" Margin="0,2" Click="ToolButton_Click" Tag="Eraser" FontSize="10"/>
                    <Button Content="Fill" Width="60" Height="30" Margin="0,2" Click="ToolButton_Click" Tag="Fill" FontSize="10"/>
                    <Separator Margin="0,6"/>
                    <Button Content="Rectangle" Width="60" Height="30" Margin="0,2" Click="ToolButton_Click" Tag="Rectangle" FontSize="10"/>
                    <Button Content="Ellipse" Width="60" Height="30" Margin="0,2" Click="ToolButton_Click" Tag="Ellipse" FontSize="10"/>
                    <Button Content="Text" Width="60" Height="30" Margin="0,2" Click="ToolButton_Click" Tag="Text" FontSize="10"/>
                </StackPanel>
            </Border>

            <!-- Drawing area with scrollbars -->
            <Border Grid.Column="1" Margin="8" BorderBrush="Gray" BorderThickness="1" Background="#FFE0E0E0">
                <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"
                              HorizontalContentAlignment="Left" VerticalContentAlignment="Top">
                    <canvas:CanvasControl x:Name="CanvasControl" HorizontalAlignment="Left" VerticalAlignment="Top"
                                          MouseLeftButtonDown="CanvasControl_MouseLeftButtonDown"/>
                </ScrollViewer>
            </Border>
        </Grid>
    </DockPanel>
</Window>
